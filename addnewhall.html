<!DOCTYPE html>
<html>
<head>
	<title>GB</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width , initial=1">
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="css/addnewhall.css">
    <link rel="stylesheet" type="text/css" href="css/admin.css">
    <link rel="stylesheet" type="text/css" href="css/animate.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Merienda" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Amaranth" rel="stylesheet">
</head>
<body>
    <section class="nav">
<div class="navbar">

	  <div class="col-xs-4 col-md-4">
           <div class="bars"><i class="fas fa-bars"><img src="img/logo2.png" style="width: 75px; margin-left: 20px;" height="60px;" > <span >Halls</span></i></div>
			  <div class="main">    
   <ul class="main-ul">
      <li><a href="admin.html" id="targeted" class="dash"><img src="img/HomeICON.png">Home</a></li>
       <hr>
 <button class="dropdown-btn"><img src="img/HallICON.png" class="icon">Halls 
    <i class="fa fa-caret-down"></i>
  </button>
  <div class="dropdown-container">
        <a href="addnewhall.html">Add New Hall</a>
        <a href="listallhalls.html">List All Halls</a>
        <a href="listCategories.html">List Category</a>
        <a href="searchByCategory.html">Search By Category</a>
        <a href="searchByName.html">Search By Name</a>
        <a href="updateHall.html">Update Hall</a>
  </div>
       <hr>
 <button class="dropdown-btn"><img src="img/UsersICON.png" class="icon">Users 
    <i class="fa fa-caret-down"></i>
  </button>
  <div class="dropdown-container">
<a href="listallusers.html">List All Users</a>
  </div>
       <hr>
 <button class="dropdown-btn"><img src="img/AdminICON.png" class="icon">Admins 
    <i class="fa fa-caret-down"></i>
  </button>
  <div class="dropdown-container">
        <a href="addnewadmin.html">Add New Admin</a>
        <a href="ListAdmins.html">List All Admins</a>
        <a href="deleteAdmin.html">Delete Admin</a>
  </div>
       <hr>
 <button class="dropdown-btn"><img src="img/OtherICON.png" class="icon">Other 
    <i class="fa fa-caret-down"></i>
  </button>
  <div class="dropdown-container">
        <a href="sendNotification.html">Send Push Notification</a>
        <a href="listFeedBack.html">List Feedback Messages</a>
  </div>
       <hr>
    </ul>
  </div>
	  </div>
		<div class="social-media">

 <button class="dropdown-btn"><span id="username"></span> 
    <i class="fa fa-caret-down"></i>
  </button>
  <div class="dropdown-container">
        <a href="changePassword.html">Change password</a>
        <a href="pri.html">Logout</a>
  </div>
	   </div>
</div>
        </section>
    <div class="add">
        <h1 class="text-center">To add new hall please fill this form</h1>
    <form id="survey-form" enctype="application/x-www-form-urlencoded">
        <label id="name-label" for="name">Hall Name<br><input type="text" id="name" placeholder="Hall Name" name="hallName" required></label>
        <label id="name-label" for="name">Hall Adress<br><input type="text" id="ha" placeholder="Hall Adress" name="hallAdress" required></label>
         <label id="name-label" for="name">Hall Category<br></label><p >
           
         </p>
         <label>Categories</label><select id="demo"></select>
         
        <label id="name-label" for="name">Hall Description<br><input type="text" id="hd" placeholder="Hall Description" name="hallDescription" required></label>
        <label id="name-label" for="name">Hall Price<br><input type="text" id="hp" placeholder="Hall Price" name="hallPrice" required></label>
        <label id="name-label" for="name">Hall Location Long<br><input type="text" id="hl" placeholder="Hall Location Long" name="hallLocationLong" required></label>
        <label id="name-label" for="name">Hall Location Lat<br><input type="text" id="hla" placeholder="Hall Location Lat" name="hallLocationLat" required></label>
        <label id="name-label" for="name">Hall Special Offers<br><input type="text" id="hs" placeholder="Hall Special Offers" name="hallSpecialOffers"></label>
        <label id="name-label" for="name">Hall Phone Number<br><input type="text" id="hp" placeholder="Hall Phone Number" name="hallPhoneNumber" required></label>
        <label id="name-label" for="name">Hall Image (Max 6 Images)<br>
          <input type="file" id="hi" placeholder="Hall Image" name="hallImage" multiple onchange="upload()"></label>
 <button type="button" id="submit" value="Send" onclick="AddHall()"> send</button>      <div id="res"></div>
      </form>
    </div>
 <script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/edit.js"></script>
	<script type="text/javascript" src="js/wow.min.js"></script>
  <script type="text/javascript"> new WOW().init();</script>  
  <script type="text/javascript" src="js/simpleUpload.js"></script>
  <script>

      var token =  window.localStorage.getItem('token'); 

 var SERVER_URL = 'https://hidden-ocean-87285.herokuapp.com';
  var IMAGES_UPLOAD_URL = '/halls/UploadImages';

  var $fileInputElement = $('input[type="file"]');

  function upload(){

    $fileInputElement.simpleUpload(SERVER_URL + IMAGES_UPLOAD_URL, {
      start: function handleStart(file) {
        // Upload started

      },

      progress: function handleProgress(progress) {
        // Received progress
      },

      success: function handleSuccess(data) {
        // Upload successful

      },

      error: function handleError(error) {
        // Upload failed

        console.error(error);
      }
    });
    
  }

  function AddHall(){
      var hallName=$("#name").val();
      var hallAdress=$("#ha").val();
      var hallCategory=$("#hc").val();
      var hallDescription=$("#hd").val();
      var hallPrice=$("#hp").val();
      var hallLocationLong=$("#hl").val();
      var hallLocationLat=$("#hla").val();
      var hallSpecialOffers=$("#hs").val();
      var hallPhoneNumber=$("#hp").val();
      var hallImage=$("#hi").val();

      let requestBody = {
          hallName : hallName,
          hallAdress : hallAdress,
          hallCategory : hallCategory,
          hallDescription : hallDescription,
          hallPrice : hallPrice,
          hallLocationLong : hallLocationLong,
          hallLocationLat : hallLocationLat,
          hallSpecialOffers : hallSpecialOffers,
          hallPhoneNumber : hallPhoneNumber
          
      }
      $.ajax({
        url: "https://hidden-ocean-87285.herokuapp.com/halls",
        type: 'POST',
        contentType: 'application/x-www-form-urlencoded',
        beforeSend: function (xhr) {
          //xhr.setRequestHeader('file',JSON.parse( fd));
            
            xhr.setRequestHeader('authorization','Bearer '+ token );
        },
        
        data : {
            hallName : hallName,
            hallAdress : hallAdress,
            hallCategory : document.getElementById("demo").value,
            hallDescription : hallDescription,
            hallPrice : hallPrice,
            hallLocationLong : hallLocationLong,
            hallLocationLat : hallLocationLat,
            hallSpecialOffers : hallSpecialOffers,
            hallPhoneNumber : hallPhoneNumber,
        },
        success: function (result) {
          alert("success");
           // CallBack(result);
        },
        error: function (error) {
            alert("error");
        }
    });
      
          
  }
  
  </script>
</body>
</html>